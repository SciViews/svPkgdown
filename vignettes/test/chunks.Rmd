---
title: "Chunks"
author: "Philippe Grosjean (phgrosjean@sciviews.org)"
date: "2020-04-16"
output: html_document
---

The R package {knitr} is used to insert R code withing your Markdown document, which makes altogether an R Markdown document, usually with the `.Rmd` extension. Go to {knitr} [homepage](http://yihui.name/knitr) for more details. This document uses various chunks to see how they appears in a {pkgdown} site with the {svPkgdown} style.

## R chunks

* A few R commands:

```{r}
# This is a comment (don't use ##, since it is reserved for output!)
a <- 1 + 1 # Another comment
TRUE; NA; "Some text"
summary(cars) # A table
```

* Normal output _versus_ message _versus_ warning _versus_ error:

```{r, warning=TRUE, error=TRUE}
# Normal output
cat("Some text...\n")
# A message
message("My very nice message")
# Output with a warning
1:2 + 1:3
# An error
non_existing_object
```

* R chunk with option to generate a plot:

```{r plot_cars, echo=FALSE, fig.cap="An example figure generated by R, from the `cars` dataset."}
par(mar = c(5.1, 4.1, .1, .1))
with(mtcars, {
  plot(mpg ~ hp, pch = 20, col = 'darkgray',
    xlab = "Horsepower", ylab = "Miles per Gallon")
  lines(lowess(hp, mpg))
})
```

* Another plot:

```{r plot_cars2, fig.width=5, fig.height=4, fig.cap="Distance in function of speed for the `cars` data set."}
library(ggplot2)
qplot(speed, dist, data = cars) + geom_smooth(method = "loess")
```

## Inline R expressions and special chunks

* Inline R expression like `r 1+1`, or `r R.version.string`.

* Rcpp code chunks can also be included in your document:

```{r fibonacci_rcpp, engine='Rcpp'}
#include <Rcpp.h>

// [[Rcpp::export]]
int fibonacci(const int x) {
    if (x == 0 || x == 1) return(x);
    return (fibonacci(x - 1)) + fibonacci(x - 2);
}
```

Because `fibonacci()` was defined with the `Rcpp::export` attribute it can now be called as a normal R function:

```{r fibonacci_test}
fibonacci(10L)
fibonacci(20L)
```

* An R chunk that is displayed, but not executed:

```{r compile, eval=FALSE}
library(knitr)
knit('R Markdown V2 Syntax.Rmd')
```

* A Python chunk:

```{python}
import sys
print(sys.version)
```
